{% extends 'base.html.twig' %}

{% block title %}Produits
{% endblock %}

{% block body %}
	<div
		style="display: flex; gap: 2em;">

		{# Colonne gauche : filtrage #}
		<div style="flex: 0 0 180px; border: 1px solid #ccc; padding: 1em; border-radius: 5px; max-height: 300px; overflow-y: auto;">
			<h3>Fourchette de prix</h3>

			<form method="get" action="{{ path('app_products') }}">
				{% set ranges = {
    '10-29.99': '10€ à 29€',
    '30-35': '30€ à 35€',
    '35-50': '35€ à 50€'
} %}


				{% for value, label in ranges %}
					<div>
						<input type="radio" id="range_{{ loop.index }}" name="price_range" value="{{ value }}" {% if selectedRange is defined and selectedRange == value %} checked {% endif %}>
						<label for="range_{{ loop.index }}">{{ label }}</label>
					</div>
				{% endfor %}

				<button type="submit" style="margin-top: 1em;">Filtrer</button>
			</form>

			{# Réinitialisation : simple lien vers la page sans paramètre GET #}
			<a href="{{ path('app_products') }}" style="display: block; margin-top: 0.5em;">Réinitialiser</a>
		</div>

		{# Colonne droite : produits en grille #}
		<div style="flex: 1; display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1em;">
			{% if products is not empty %}
				{% for product in products %}
					<div style="border: 1px solid #ccc; padding: 1em; border-radius: 5px; text-align: center;">
						<img src="{{ asset('images/clothes/' ~ product.image) }}" alt="{{ product.name }}" style="max-width: 100%; height: auto; margin-bottom: 0.5em;">
						<strong>{{ product.name }}</strong><br>
						{{ product.price }}€<br>
						<a href="{{ path('app_product_show', {'id': product.id}) }}" style="display: inline-block; margin-top: 0.5em; padding: 0.3em 0.6em;
																																								                              background-color: #007bff; color: white; text-decoration: none; border-radius: 3px;">
							Voir
						</a>
					</div>
				{% endfor %}
			{% else %}
				<p>Aucun produit trouvé pour cette fourchette de prix.</p>
			{% endif %}
		</div>

	</div>
{% endblock %}
