<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Paiement Stripe</title>
		<script src="https://js.stripe.com/v3/"></script>
		<style>
			#card-element {
				border: 1px solid #ccc;
				padding: 10px;
				border-radius: 4px;
				max-width: 400px;
				margin-bottom: 10px;
			}
			#submit {
				background-color: #6772e5;
				color: white;
				border: none;
				padding: 10px 15px;
				font-size: 16px;
				border-radius: 4px;
				cursor: pointer;
			}
			#submit:disabled {
				opacity: 0.5;
				cursor: not-allowed;
			}
			#card-errors {
				color: red;
				margin-top: 10px;
			}
		</style>
	</head>
	<body>
		<h1>Paiement test Stripe</h1>

		<form id="payment-form">
			<div id="card-element"></div>
			<button id="submit">Payer 20 â‚¬</button>
			<div id="card-errors" role="alert"></div>
		</form>

		<script>
			const stripe = Stripe("{{ stripePublicKey }}");
const elements = stripe.elements();
const card = elements.create('card');
card.mount('#card-element');

const form = document.getElementById('payment-form');
const submitButton = document.getElementById('submit');
const errorDiv = document.getElementById('card-errors');

form.addEventListener('submit', async (event) => {
event.preventDefault();
submitButton.disabled = true;
errorDiv.textContent = '';

const {error, paymentIntent} = await stripe.confirmCardPayment("{{ clientSecret }}", {
payment_method: {
card: card
}
});

if (error) {
errorDiv.textContent = error.message;
submitButton.disabled = false;
} else if (paymentIntent.status === 'succeeded') {
window.location.href = "{{ path('confirmation') }}";
}
});
		</script>
	</body>
</html>
